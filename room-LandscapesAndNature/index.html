 <script>
/* Exact filenames (lowercase image-hotel.png) */
const FILES = ["image-hotel.png","IMG_7018.PNG","IMG_0150.PNG"];

/* Optional plaques */
const DESCRIPTIONS = {
  "image-hotel.png": "An urban horizon softened by nature’s palette—where structure meets sky.",
  "IMG_7018.PNG": "A trail that invites the eye to wander."
};

const ROOM = "Landscapes & Nature";
const cards = document.getElementById('cards');

/* Utility */
const pretty = f =>
  f.replace(/\.[^.]+$/,'')
   .replace(/[_-]+/g,' ')
   .replace(/\b\w/g,c=>c.toUpperCase())
   .trim();

/* Build a cache-busted URL (avoids Safari/CDN caching the old name) */
function withBuster(p){
  const u = new URL(p, location.href);
  u.searchParams.set('v', Date.now().toString());   // cache-buster
  return u.toString();
}

/* Create one card */
function addCard(file){
  const title = pretty(file);
  const preferred = withBuster(`img/${file}`);   // expected location
  const fallback  = withBuster(file);            // same folder as index.html

  const article = document.createElement('article');
  article.className = 'card';
  article.innerHTML = `
    <a href="#" class="frame"><div class="tile"><img alt="${title}"></div></a>
    <div class="meta">
      <h3>${title}</h3>
      <p class="sub"><strong>${ROOM}</strong> · <code>${file}</code></p>
      <p>${DESCRIPTIONS[file] || "Add commentary for this artwork."}</p>
    </div>
  `;

  const img = article.querySelector('img');

  // try preferred path; if it 404s, try fallback once
  img.onerror = function onErr(){
    if (img.dataset.triedFallback === "1") {
      console.warn(`Could not load: ${preferred} or ${fallback}`);
      img.onerror = null;
      return;
    }
    img.dataset.triedFallback = "1";
    img.src = fallback;
  };
  img.src = preferred;

  // Lightbox
  const frame = article.querySelector('.frame');
  frame.addEventListener('click', (e) => {
    e.preventDefault();
    openLightbox(img.currentSrc || img.src, title);
  });

  cards.appendChild(article);
}

for (const f of FILES) addCard(f);

/* Lightbox */
const lb = document.getElementById('lb'), im = document.getElementById('img');
document.getElementById('c').onclick = closeLightbox;
lb.addEventListener('click', e => { if (e.target === lb) closeLightbox(); });
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeLightbox(); });

function openLightbox(src, alt){
  im.src = src; im.alt = alt;
  lb.classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeLightbox(){
  lb.classList.remove('open'); im.src = '';
  document.body.style.overflow = '';
}
</script>
